version: '3'

services:
  sut:
    build: ..
    command: 
      - sh
      - -c
      - |
        set -ex
        sed -i -e '$s/.*/#&/' ../docker_entrypoint.sh
        docker_entrypoint.sh
    restart: "no"
    volumes:
      - config:/HoshinoBot/hoshino/config
      - requirements:/HoshinoBot/hoshino/requirements

volumes:
  config:
    driver: local
    driver_opts:
      type: 'none'
      o: 'bind'
      device: $PWD/config
  requirements:
    driver: local
    driver_opts:
      type: 'none'
      o: 'bind'
      device: $PWD/requirements
  

# only for test